# 2장 TDD 시작

## TDD 란?

TDD는 테스트부터 시작한다.  
테스트를 먼저 한다는 것은 기능이 올바르게 동작하는지 검증하는 테스트 코드를 작성한다는 것을 의미한다.  
기능을 검증하는 테스트 코드를 먼저 작성하고 테스트를 통과시키기 위해 개발을 진행한다.

테스트에 필요한 객체는 src/test/java에서 먼저 만들고, 이후 테스트가 성공하면 src/main/java로 옮긴다.  
src/test/java 소스 폴더는 배포 대상이 아니므로 src/test/java 폴더에 코드를 만들면 완성되지 않은 코드가 배포되는 것을 방지하는 효과가 있다.

TDD는 기능을 검증하는 테스트 코드를 먼저 만든다.  
테스트 대상이 될 클래스 이름, 메소드 이름, 파라미터 개수, 리턴타입을 고민한다.  
새로운 객체를 생성할지 아니면 정적 메소드로 구현할지 등을 함께 고민한다.

TDD는 테스트를 먼저 작성하고 테스트에 실패하면 테스트를 통과시킬 만큼 코드를 추가하는 과정을 반복하면서 점진적으로 기능을 완성해 나간다.

## TDD 예: 암호검사기

첫 번째 테스트를 선택할 때에는 가장 쉽거나 가장 예외적인 상황을 선택해야 한다.

테스트 코드의 중복을 무턱대고 제거하면 안 된다.  
중복을 제거한 뒤에도 테스트 코드의 가독성이 떨어지지 않고 수정이 용이한 경우에만 중복을 제거해야 한다.

## TDD 흐름

전형적인 TDD 흐름  
* 기능을 검증하는 테스트를 먼저 작성한다.
* 작성한 테스트를 통과하지 못하면 테스트를 통과할 만큼만 코드를 작성한다.
* 테스트를 통과한 뒤에는 개선할 코드가 있으면 리팩토링한다.
* 리팩토링을 수행한 뒤에는 다시 테스트를 실행해서 기존 기능이 망가지지 않았는지 확인한다.
* 위의 과정들을 반복하면서 점진적으로 기능을 완성해 나간다.

레드 그린 리팩터  
TDD 사이클을 레드(Red)-그린(Green)-리팩터(Refactor)로 부르기도 한다.  
레드는 실패하는 테스트, 그린은 성공한 테스트, 리팩터는 이름 그대로 리팩토링 과정을 의미한다.

### 테스트가 개발을 주도

테스트 코드를 먼저 작성하면 테스트가 개발을 주도하게 된다.

### 지속적인 코드 정리

구현을 완료한 뒤에는 리팩토링을 진행한다.  
테스트 코드 자체도 리팩토링 대상에 넣었다.

TDD는 개발 과정에서 지속적으로 코드 정리를 하므로 코드 품질이 급격히 나빠지지 않게 막아주는 효과가 있다.  
향후 유지보수 비용을 낮추는데 기여한다.

### 빠른 피드백

TDD가 주는 이점은 코드 수정에 대한 피드백이 빠르다는 점이다.  
새로운 코드를 추가하거나 기존 코드를 수정하면 테스트를 돌려서 해당 코드가 올바른지 바로 확인할 수 있다.  
이는 잘못된 코드가 배포되는 것을 방지한다.