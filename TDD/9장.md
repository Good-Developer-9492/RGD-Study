# 테스트 범위와 종류

## 테스트 범위

테스트의 범위는 테스트의 목적과 수행하는 사람에 따라 달라진다.

기능테스트, 통합테스트, 단위테스트가 있다.

### 기능 테스트와 E2E 테스트

기능 테스트는 사용자 입장에서 시스템이 제공하는 기능이 올바르게 동작하는지 확인한다.  
이 테스트를 수행하려면 시스템을 구동하고 사용하는데 필용한 모든 구성요소가 필요하다.

사용자가 직접 사용하는 웹 브라우저나 모바일 앱부터 시작해서 데이터베이스나 외부 서비스에 이르기까지 모든 구성 요소를 하나로 엮어서 진행한다.

기능 테스트는 끝에서 끝까지 올바른지 검사하기 때문에 E2E(End to End) 테스트로도 볼 수 있다.

QA조직에서 수행하는 테스트가 주로 기능 테스트이다.

### 통합 테스트

통합 테스트는 시스템의 각 구성 요소가 올바르게 연동되는지 확인한다.

### 단위 테스트

단위 테스트는 개별 코드나 컴포넌트가 기대한대로 동작하는지 확인한다.

한 클래스나 한 메소드와 같은 작은 범위를 테스트한다.

### 테스트 범위간 차이

* 준비
  * 통합 테스트는 DB나 캐시 서버와 같은 연동 대상을 구성해야 한다.
  * 기능 테스트를 실행하려면 웹 서버를 구동하거나 모바일 앱을 설치해야 한다.
  * 단위 테스트는 테스트 코드를 빼면 준비할 것이 없다.
* 실행 속도
  * 통합 테스트는 테스트 실행 속도를 느리게 만드는 요인이 많다.
  * 기능 테스트는 브라우저나 앱을 구동하고 화면의 흐름에 따라 알맞은 상호작용을 해야 한다.
  * 단위 테스트는 서버를 구동하거나 DB를 준비할 필요가 없다.
* 상황
  * 통합 테스트와 기능 테스트는 상황을 준비하거나 결과 확인이 어렵거나 불가능할 때가 있다.
  * 단위 테스트와 대역을 조합해서 상황을 만들고 결과를 확인해야 한다.

### 테스트 범위에 따른 테스트 코드 개수와 시간

기능 테스트나 통합 테스트에서 모든 예외 상황을 테스트하면 단위 테스트는 줄어든다.

통합 테스트보다 단위 테스트가 테스트 속도가 빠르기 때문에 가능하면 단위 테스트에서 다양한 상황을 다루고, 통합 테스트나 기능 테스트는 주요 상황에 초점을 맞춰야 한다.

테스트 실행 속도가 느려지면 테스트를 작성하지 않거나 테스트 실행을 생략하는 상황이 벌어진다.

## 외부 연동이 필요한 테스트 예

소프트웨어는 다양한 외부 연동이 필요하다.

### 스프링 부트와 DB 통합 테스트

테스트 코드에서 DB 데이터를 알맞게 제어해야 한다.

통합 테스트와 단위 테스트는 실행 시간에도 차이가 있다.

### WireMock을 이용한 REST 클라이언트 테스트

외부 서버를 테스트할 때는 WireMock을 활용할 수 있다.

WireMockServer는 HTTP 서버를 흉내 낸다.  
응답 시간을 지연할 수도 있다.