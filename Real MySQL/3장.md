# 3장 사용자 및 권한

## 3.1 사용자 식별

MySQL의 사용자는 사용자의 계정뿐 아니라 사용자의 접속 지점도 계정의 일부가 된다.

만약 모든 외부 컴퓨터에서 접속이 가능한 계정을 생성하고 싶다면 사용자 계정의 호스트 부분을 `%` 문자로 대체하면 된다.

권한이나 계정 정보에 대해 MySQL은 범위가 가장 작은 것을 항상 먼저 선택한다.

## 3.2 사용자 계정 관리

### 3.2.1 시스템 계정과 일반 계정

MySQL 8.0부터 계정은 `SYSTEM_USER` 권한을 가지고 있느냐에 따라 시스템 계정(System Account)과 일반 계정(Regular Account)으로 구분된다.  
시스템 계정은 데이터베이스 서버 관리자를 위한 계정이며, 일반 계정은 응용 프로그램이나 개발자를 위한 계정으로 생각하면 이해하기 쉽다.

데이터베이스 서버 관리와 관련된 중요 작업은 시스템 계정으로만 수행할 수 있다.  
* 계정 관리 (계정 생성 및 삭제, 계정의 권한 부여 및 제거)
* 다른 세션 또는 그 세션에서 실행 중인 쿼리를 강제 종료
* 스토어드 프로그램 생성 시 `DEFINER`를 타 사용자로 설정

### 3.2.2 계정 생성

계정의 생성은 `CREATE USER` 명령으로, 권한 부여는 `GRANT` 명령으로 구분해서 실행한다. 계정을 생성할 때는 다음과 같은 다양한 옵션을 설정할 수 있다.  
* 계정의 인증 방식과 비밀번호
* 비밀번호 관련 옵션 (유효기간, 이력개수, 재사용불가 기간)
* 기본 역할 (Role)
* SSL 옵션
* 계정 잠금 여부

계정 생성 옵션
* IDENTIFIED WITH
  * 사용자의 인증 방식과 비밀번호를 설정한다.
  * MySQL 서버에서는 다양한 인증 방식을 플러그인 형태로 제공한다.
    * Native Pluggable Authentication
    * Caching SHA-2 Pluggable Authentication
    * PAM Pluggable Authentication
    * LDAP Pluggable Authentication
* REQUIRE
  * 서버에 접속할 때 암호화된 SSL/TLS 채널을 사용할지 여부를 설정한다.
* PASSWORD EXPIRE
  * 비밀번호의 유효 기간을 설정한다.
* PASSWORD HISTORY
  * 한 번 사용했던 비밀번호를 재사용하지 못하게 설정한다.
* PASSWORD REUSE INTERVAL
  * 한 번 사용했던 비밀번호의 재사용 금지 기간을 설정한다.
* PASSWORD REQUIRE
  * 비밀번호가 만료되어 새로운 비밀번호로 변경할 때 현재 비밀번호를 필요로 할지 말지 결정한다.
* ACCOUNT LOCK/UNLOCK
  * 계정 생성시 또는 `ALTER USER` 명령을 사용해 계정 정보를 변경할 때 계정을 사용하지 못하게 잠글지 여부를 결정헌다.

## 3.3 비밀번호 관리

## 3.4 권한 (Privilege)

데이터베이스나 테이블 이외의 객체에 적용되는 권한을 글로벌 권한이라고 하며, 데이터베이스나 테이블을 제어하는 데 필요한 권한을 객체 권한이라 한다.

사용자에게 권한을 부여할 때는 GRANT 명령을 사용한다.

## 3.5 역할 (Role)

권한을 묶어서 역할을 사용할 수 있게 됐다.

기본적으로 역할은 그 자체로 사용될 수 없고 계정에 부여해야 한다.